

# 概览

```
 *    +----------+      irqfd     +----------+
 *    |          | -------------> |          |
 *    | KVM/QEMU |                |     VM   |
 *    |          | <------------- |          |
 *    +----------+    ioeventfd   +----------+
 *
 *
 *    +-------------+                +-------------+
 *    |             |                |             |
 *    |             |                |             |
 *    |   GuestOS   |                |     QEMU    |
 *    |             |                |             |
 *    |             |                |             |
 *    +---+---------+                +----+--------+
 *        |     ^                         |    ^
 *        |     |                         |    |
 *    +---|-----|-------------------------|----|---+
 *    |   |     |                irqfd    |    |   |
 *    |   |     +-------------------------+    |   |
 *    |   |  ioeventfd                         |   |
 *    |   +------------------------------------+   |
 *    |                   KVM                      |
 *    +--------------------------------------------+
```


```
 *          +------------------------------------+
 *          |       virtio  guest driver         |
 *          +-----------------+------------------+
 *            /               |              ^
 *           /                |               \
 *          put            update             get
 *         /                  |                 \
 *        V                   V                  \
 *   +----------+      +------------+        +----------+
 *   |          |      |            |        |          |
 *   +----------+      +------------+        +----------+
 *   | available|      | descriptor |        |   used   |
 *   |   ring   |      |   table    |        |   ring   |
 *   +----------+      +------------+        +----------+
 *   |          |      |            |        |          |
 *   +----------+      +------------+        +----------+
 *   |          |      |            |        |          |
 *   +----------+      +------------+        +----------+
 *        \                   ^                   ^
 *         \                  |                  /
 *         get             update              put
 *           \                |                /
 *            V               |               /
 *           +----------------+-------------------+
 *           |       virtio host backend          |
 *           +------------------------------------+
```

# 参考链接

* [https://kernelgo.org/virtio-overview.html](https://kernelgo.org/virtio-overview.html)
